<ion-view view-title="Pizza">
  <ion-content class="padding">
    <div class="row">
      <!-- Duplicate -->
      <div id="commande" class="col-20 item">
        <div class="item item-balanced">
          <h2>Table num√©ro {{tableNum}}</h2>
        </div>
        <!-- Premier appel de l'appli -->
        <div class="list" ng-if="name && commandes.length == 0">
          <div class="item item-divider">
            {{name}}
          </div>
        </div>
        <!-- Tous les clients et leurs commandes -->
        <div class="list">
          <ion-list>
            <ion-item scroll-item ng-repeat="cmd in userCommande track by $index">
              <h4>{{cmd.user_id}}</h4>
              <ion-list>
                <ion-item ng-repeat="piz in cmd.listPizzas track by $index">
                  <p>{{piz}}</p>
                </ion-item>
              </ion-list>
            </ion-item>
          </ion-list>
          <!--
                      <div class="item item-divider" ng-repeat="cmd in userCommande track by $index">
                          <h4>{{cmd.user_id}}</h4>
                          <h4>Les pizzas</h4>
                              <div class="item item-divider" ng-repeat="piz in cmd.listPizzas track by $index" ng-if="piz != 0">
                                  <p>{{piz}}</p>
                              </div>
                      </div>
                  -->
        </div>

        <button class="button button-balanced">
          Valider
        </button>
      </div>
      <div class="col-80 padding" id="principal">
        <div class="row">
          <div class="col-50">
            <div class="list" ng-if="name == ''">
              <div class="item item-input-inset">
                <label class="item-input-wrapper">
                  <input type="text" placeholder="Votre Nom" ng-model="userName">
                </label>
                <button class="button button-small" ng-click="createUser(userName)">OK</button>
              </div>
            </div>
            <div class="list" ng-if="name != ''">
              <h3>Commande de {{name}}</h3>
            </div>
          </div>
          <div class="col-50 col-center floatRight">
            <button class="button button-energized" ng-click="getPizza(-1)">
              Creer votre propre pizza
            </button>
          </div>
        </div>
        <hr>
        <div class="row list list-inline">
          <button ng-click="getPizzaAll()" ng-class="{true: 'col-20 button button-assertive', false: 'col-20 button button-stable'}[categoriePizzas == 'All']">
            Toutes
          </button>
          <button ng-click="getPizzaCat('VIANDE')" ng-class="{true: 'col-20 button button-assertive', false: 'col-20 button button-stable'}[categoriePizzas == 'VIANDE']">
            Viande
          </button>
          <button ng-click="getPizzaCat('POISSON')" ng-class="{true: 'col-20 button button-assertive', false: 'col-20 button button-stable'}[categoriePizzas == 'POISSON']">
            Poisson
          </button>
          <button ng-click="getPizzaCat('SANS VIANDE')"ng-class="{true: 'col-20 button button-assertive', false: 'col-20 button button-stable'}[categoriePizzas == 'SANS VIANDE']">
            Sans Viande
          </button>
          <button ng-click="getPizzaTop(10)"ng-class="{true: 'col-20 button button-assertive', false: 'col-20 button button-stable'}[categoriePizzas == 'Top']">
            Top 10
          </button>
        </div>
        <ion-scroll direction="y" class="available-scroller" style="width: 100%; height: 70vh">
          <div class="pizza" collection-repeat="pizza in pizzasMkd" item-height="25%" item-width="25%">
            <img ng-src="img/pizzas/{{pizza.img}}" ng-click="goToPizzasCustom(pizza.id)">
            <h4>{{pizza.name}}</h4>
          </div>
        </ion-scroll>
        <button ng-click="call()" class="col-25 button button-stable bottomButtonHelp" id="button">
          Appeler le serveur
        </button>
        <div id="bottomButtonDiv" class="row">
          <button ng-click="goToBoissons()" class="col-25 button button-stable bottomButton">
            Passer aux boissons
          </button>
        </div>
      </div>
    </div>
  </ion-content>
</ion-view>
